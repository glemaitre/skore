name: Build sphinx documentation

inputs:
  SPHINX_VERSION:
    required: true
  SPHINX_RELEASE:
    required: true
  SPHINX_DOMAIN:
    required: true

runs:
  using: composite
  steps:
    - uses: actions/checkout@v4
    - uses: prefix-dev/setup-pixi@v0.8.2
      with:
        manifest-path: skore/pyproject.toml
        environments: doc
        # we can freeze the environment and manually bump the dependencies to the
        # latest version time to time.
        frozen: true

    - name: Make docs
      working-directory: skore/
      shell: bash
      run: |
        SPHINX_VERSION=${{ inputs.SPHINX_VERSION }}
        SPHINX_RELEASE=${{ inputs.SPHINX_RELEASE }}
        SPHINX_DOMAIN=${{ inputs.SPHINX_DOMAIN }}
        pixi run -e doc docs
